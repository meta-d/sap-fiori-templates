<!--非固定tab模式-->
@if (!fixedTab()) {
  <nz-card id="multi-tab" [nzBodyStyle]="{ padding: '5px', paddingBottom: 0 }" [nzBordered]="false">
    <nz-tabset [nzHideAdd]="true" [nzSelectedIndex]="currentIndex" [nzTabBarStyle]="{ height: '35px' }" [nzTabPosition]="'top'" [nzType]="'editable-card'" (nzClose)="clickCloseIcon($event)">
      <nz-tab *ngFor="let tab of tabsSourceData$ | async; let i = index; trackBy: trackByTab" nzClosable [nzTitle]="tab.title" (nzClick)="goPage(tab)" (nzContextmenu)="contextMenu($event, menu)">
        <nz-dropdown-menu #menu="nzDropdownMenu">
          <ul nz-menu>
            <li nz-menu-item [nzDisabled]="router.url !== tab.path" (click)="refresh()">刷新</li>
            <li nz-menu-item [nzDisabled]="tabsSourceData.length - 1 === 0" (click)="closeTab(tab, $event, i)">关闭标签</li>
            <li nz-menu-item [nzDisabled]="tabsSourceData.length - 1 === 0" (click)="closeOtherTab(tab, $event, i)">关闭其他标签</li>
            <li nz-menu-item [nzDisabled]="tabsSourceData.length - 1 === i" (click)="closeRithTab(tab, $event, i)">关闭右侧标签</li>
            <li nz-menu-item [nzDisabled]="i === 0" (click)="closeLeftTab(tab, $event, i)">关闭左侧标签</li>
          </ul>
        </nz-dropdown-menu>
      </nz-tab>
    </nz-tabset>
  </nz-card>
} @else {
  <!--固定tab模式-->
  <nz-card
    id="multi-tab2"
    class="fixed-tab"
    [ngClass]="{
      'fixed-collapsed': isCollapsed()
    }"
    [ngStyle]="{ top: hasTopArea() ? '64px' : '0', left: !hasNavArea() ? '0' : '' }"
    [nzBodyStyle]="{ padding: 0 }"
    [nzBordered]="true"
  >
    <nz-tabset [nzAnimated]="false" [nzSelectedIndex]="currentIndex" [nzTabPosition]="'top'" nzType="editable-card">
      <nz-tab *ngFor="let tab of tabsSourceData$ | async; let i = index; trackBy: trackByTab" nzClosable [nzTitle]="titleTemplate" (nzClick)="goPage(tab)" (nzContextmenu)="contextMenu($event, menu)">
        <ng-template #titleTemplate>
          <span class="text-center p-l-16 p-r-16 relative d-i-b" appMouseHoverShow style="min-width: 60px">
            {{ tab.title }}
            <i class="m-0 none" nz-icon [nzType]="'close'" (click)="clickCloseIcon({ index: i })"></i>
          </span>
        </ng-template>
        <nz-dropdown-menu #menu="nzDropdownMenu">
          <ul nz-menu>
            <li nz-menu-item [nzDisabled]="router.url !== tab.path" (click)="refresh()">刷新</li>
            <li nz-menu-item [nzDisabled]="tabsSourceData.length - 1 === 0" (click)="closeTab(tab, $event, i)">关闭标签</li>
            <li nz-menu-item [nzDisabled]="tabsSourceData.length - 1 === 0" (click)="closeOtherTab(tab, $event, i)">关闭其他标签</li>
            <li nz-menu-item [nzDisabled]="tabsSourceData.length - 1 === i" (click)="closeRithTab(tab, $event, i)">关闭右侧标签</li>
            <li nz-menu-item [nzDisabled]="i === 0" (click)="closeLeftTab(tab, $event, i)">关闭左侧标签</li>
          </ul>
        </nz-dropdown-menu>
      </nz-tab>
    </nz-tabset>
  </nz-card>
}
@if (fixedTab()) {
  <div class="w-full h-[42px]"></div>
}